import { Evaluation } from '../../domain/entities/evaluation.entity';
import { EvaluationOrmEntity } from './evaluation.orm-entity';

export class EvaluationMapper {
  static toDomain(orm: EvaluationOrmEntity): Evaluation {
    return Evaluation.reconstitute(
      orm.uuid, // Use UUID for external identification
      String(orm.collaboratorId), // Convert to string for domain layer
      orm.type,
      orm.status,
      orm.answers,
      orm.score,
      orm.createdAt,
      orm.updatedAt,
      orm.completedAt,
    );
  }

  static toOrm(domain: Evaluation): EvaluationOrmEntity {
    const orm = new EvaluationOrmEntity();
    // Note: uuid is auto-generated by DB, don't set it when creating new records
    orm.uuid = domain.id;
    orm.collaboratorId = Number(domain.collaboratorId);
    orm.type = domain.type;
    orm.status = domain.status;
    orm.answers = domain.answers;
    orm.score = domain.score;
    orm.createdAt = domain.createdAt;
    orm.updatedAt = domain.updatedAt;
    orm.completedAt = domain.completedAt;
    return orm;
  }
}

